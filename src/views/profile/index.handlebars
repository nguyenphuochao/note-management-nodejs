<div class="mt-5">
    <h2>Thông tin tài khoản</h2>
    <form action="/profile?_method=PUT" method="POST" enctype="multipart/form-data">
        <div class="form-group">
            <label for="fullname">Họ và tên</label>
            <input type="text" class="form-control" id="fullname" name="fullname" value="{{user.fullname}}" required>
        </div>

        <div class="form-group">
            <label for="avatar">Avatar</label>
            <input type="file" class="form-control" id="avatar" name="avatar" value="">
            <img height="200" alt="Image preview...">
            <button type="button" class="btn-delete-avatar">X</button>
        </div>

        <div class="form-group">
            <label for="email">Email</label>
            <input type="text" class="form-control" id="fullname" name="fullname" value="{{user.email}}" disabled>
        </div>

        <div class="form-group">
            <label for="createdAt">Ngày đăng kí tài khoản</label>
            <input type="text" class="form-control" id="createdAt" name="createdAt" value="{{vnFullFormat user.createdAt}}" disabled>
        </div>

        <div>
            <button class="btn btn-primary">Cập nhật</button>
            <a href="/" class="btn btn-warning">Quay về</a>
        </div>
    </form>
</div>

<script>
    // Loaded DOM
    document.addEventListener("DOMContentLoaded", (event) => {
        var avatarInput = $("#avatar")
        var previewAvatar = document.querySelector('img');
        var btnDeleteAvatar = $(".btn-delete-avatar")

        // Update title
        document.title = "Quản lí ghi chú | Thông tin tài khoản"

        btnDeleteAvatar.hide(); // set default hide preview avatar

        // Set preview avatar
        avatarInput.change(function (e) {
            btnDeleteAvatar.show();
            var file = e.target.files[0];
            let url = window.URL.createObjectURL(file);
            previewAvatar.src = url // update src image

            // reset value
            e.target.value = null
        })

        // Click button [X] delete avatar
        btnDeleteAvatar.click(function (e) {
            btnDeleteAvatar.hide();
            previewAvatar.src = ""
        })
    })
</script>