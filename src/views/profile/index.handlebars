<div class="mt-5">
    <h2>Thông tin tài khoản</h2>
    <form action="/profile?_method=PUT" method="POST" enctype="multipart/form-data">
    
        <div class="form-group">
            <label for="fullname">Họ và tên</label>
            <input type="text" class="form-control" id="fullname" name="fullname" placeholder="Nhập họ tên" value="{{user.fullname}}" required>
        </div>

        {{!-- <div class="form-group">
            <label for="avatar">Avatar</label>
            <input type="file" class="form-control" id="avatar" name="avatar" value="">
            {{#if (checkHasAvatar user.avatar)}}
            <img class="preview-avatar" src="/uploads/{{user.avatar}}" height="200" alt="{{user.avatar}}">
            <button type="button" class="btn-delete-avatar" style="display: inline-block">X</button>
            {{else}}
            <img class="preview-avatar" height="200" alt="Avatar Preview...">
            <button type="button" class="btn-delete-avatar" style="display: none">X</button>
            {{/if}}
        </div> --}}

        <div class="form-group">
            <label for="current_password">Mật khẩu hiện tại</label>
            <input type="password" class="form-control" id="current_password" name="current_password" autocomplete="new-password">
        </div>

        <div class="form-group">
            <label for="new_password">Mật khẩu mới</label>
            <input type="password" class="form-control" id="new_password" name="new_password">
        </div>

        <div class="form-group">
            <label for="confirm_password">Nhập lại mật khẩu mới</label>
            <input type="password" class="form-control" id="confirm_password" name="confirm_password">
        </div>

        <div class="form-group">
            <label for="email">Email</label>
            <input type="text" class="form-control" id="fullname" name="fullname" value="{{user.email}}" disabled>
        </div>

        <div class="form-group">
            <label for="createdAt">Ngày đăng kí tài khoản</label>
            <input type="text" class="form-control" id="createdAt" name="createdAt"
                value="{{vnFullFormat user.createdAt}}" disabled>
        </div>

        <div>
            <button class="btn btn-primary btn-sm">Cập nhật</button>
            <a href="/" class="btn btn-warning btn-sm">Quay về</a>
        </div>
    </form>
</div>

<script>
    // Loaded DOM
    document.addEventListener("DOMContentLoaded", (event) => {
        var avatarInput = $("#avatar")
        var previewAvatar = document.querySelector(".preview-avatar");
        var btnDeleteAvatar = $(".btn-delete-avatar")

        console.log(previewAvatar)
        console.log(btnDeleteAvatar)

        // Update title
        document.title = "Quản lí ghi chú | Thông tin tài khoản"

        // Set preview avatar
        avatarInput.change(function (e) {
            btnDeleteAvatar.show();
            var file = e.target.files[0];
            let url = window.URL.createObjectURL(file);
            previewAvatar.src = url // update src image
        })

        // Click button [X] delete avatar
        btnDeleteAvatar.click(function (e) {
            btnDeleteAvatar.hide();
            previewAvatar.src = ""
            previewAvatar.alt = ""
        })
    })
</script>